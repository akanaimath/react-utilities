'use strict';

/**
 * Similar to Object.assign, but works with arrays too
 * @param {any} data
 * @param {any} target
 */var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i['return'])_i['return']()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError('Invalid attempt to destructure non-iterable instance')}}}();var _typeof=typeof Symbol==='function'&&typeof Symbol.iterator==='symbol'?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==='function'&&obj.constructor===Symbol&&obj!==Symbol.prototype?'symbol':typeof obj};
function copyTo(data,target){
for(var key in data){
var type=_typeof(data[key]);
if(type=='object'){
target[key]=cloneObject(data[key]);
}else{
target[key]=data[key];
}
}
return target;
}
/**
 * Creates a full recursive copy of an object.
 * @param {any} data
 * Note, only the following types are copied: primitives, Object and Array
 */
function cloneObject(data){
if(typeof data=='undefined'||data==null){
return null;
}else if((typeof data==='undefined'?'undefined':_typeof(data))!='object'){
return data;
}
if(data.constructor==Array){
var target=[];
return copyTo(data,target);
}else if(data.constructor==Object){
var _target={};
return copyTo(data,_target);
}else{
return data;
}
}

/**
 * @param {any} srcObj
 * @param {any} dstObj
 * 
 * Only merges elements that exist in target and data if they are of the same object type.
 * 
 * Example:
 * 
 * Given:
 *   srcObj={
 *     a: 1,
 *     b: 2,
 *     c: [0, 1, 3,{d: 0,f: [0,1],g: {x: 11} }]
 *   };
 *   dstObj={
 *        e: [0,0,0],
 *        c: [1,0,2,{f: [1],g: {x: 12,y: 13}}]
 *    };
 * 
 * The resulting object would be:
 * 
 *   target={
 *      a: 1,
 *      b: 2,
 *      c: [1, 0, 2,{d: 0,f: [1,1],g: {x: 12, y: 13}}],
 *      e: [0,0,0]
 *    };
 */
function mergeObjects(srcObj,dstObj){

var src=srcObj;
var dst=dstObj;
var srcType=typeof src==='undefined'?'undefined':_typeof(src);
var dstType=typeof dst==='undefined'?'undefined':_typeof(dst);

if(src==null){
return dst==null?null:cloneObject(dst);
}else if(dst==null){
return cloneObject(src);
}else if(srcType==dstType&&srcType=='object'){
if(src.constructor!=dst.constructor){
return cloneObject(src);
}else{
var keys=void 0;
var result=cloneObject(src);
if(src.constructor==Array){
keys=src.length>dst.length?src:dst;
}else{
keys={};
Object.assign(keys,src,dst);
}
for(var key in keys){
var _srcType=_typeof(src[key]);
var _dstType=_typeof(dst[key]);
if(src.hasOwnProperty(key)&&dst.hasOwnProperty(key)){
if(_srcType==_dstType&&_srcType=='object'){
if(src[key]==null){
result[key]=cloneObject(dst[key]);
}else if(dst[key]==null){
result[key]=cloneObject(src[key]);
}else{
result[key]=mergeObjects(src[key],dst[key]);
}
}else if(_srcType=='object'&&src[key]!=null){
result[key]=cloneObject(src[key]);
}else if(dst[key]!=null){
result[key]=cloneObject(dst[key]);
}else{
result[key]=cloneObject(src[key]);
}

}else if(!src.hasOwnProperty(key)){
result[key]=cloneObject(dst[key]);
}else{
result[key]=cloneObject(src[key]);
}
}
return result;
}
}else if(srcType=='object'){
return cloneObject(src);
}else{
return cloneObject(dst);
}
}

/**
 * Clones a react props object.  All fields in the ignore list are ignored
 * @param {Object} props
 * @param {Array} ignore
 */
function cloneProps(props){var ignore=arguments.length>1&&arguments[1]!==undefined?arguments[1]:['root'];
var target={};

var ign={};
for(var id in ignore){
ign[ignore[id]]=null;
}
for(var key in props){
if(ign.hasOwnProperty(key)){
continue;
}

target[key]=props[key];
}
var result=cloneObject(target);

return result;
}


/**
 * 
 * @param {any} src
 * @param {any} dst
 * 
 * Returns true if the 2 objects differ
 */
function objectsDiffer(srcObj,dstObj){

var que=[[srcObj,dstObj]];
var src=void 0,dst=void 0;var _loop=function _loop(){var _que$pop=

que.pop();var _que$pop2=_slicedToArray(_que$pop,2);src=_que$pop2[0];dst=_que$pop2[1];
var srcType=typeof src==='undefined'?'undefined':_typeof(src);
var dstType=typeof dst==='undefined'?'undefined':_typeof(dst);

if(srcType!=dstType){
return{v:true};
}else if(srcType!='object'){
if(src!=dst){
return{v:true};
}
}else if(src==null&&dst==null){
if(que.length<1){
return{v:false};
}
}else if(src==null&&dst!=null){
return{v:true};
}else if(src!=null&&dst==null){
return{v:true};
}else if(src.constructor!=dst.constructor){
return{v:true};
}

var keys=void 0;
var count=0;
if(src.constructor==Array){
if(src.length!=dst.length){
return{v:true};
}else{
keys=src.length;
}
}else{
keys={};
Object.keys(src).map(function(key){keys[key]=null});
Object.keys(dst).map(function(key){keys[key]=null});
}

for(var key in keys){
if(src.hasOwnProperty(key)&&dst.hasOwnProperty(key)){
que.push([src[key],dst[key]]);
}else if(!src.hasOwnProperty(key)&&dst.hasOwnProperty(key)){
return{v:true};
}else if(src.hasOwnProperty(key)&&!dst.hasOwnProperty(key)){
return{v:true};
}
}};while(que.length>0){var _ret=_loop();if((typeof _ret==='undefined'?'undefined':_typeof(_ret))==='object')return _ret.v;
}
return false;
}

/**
 * 
 * @param {any} a
 * @param {any} b
 * 
 * returns a new list that excludes b from a
 */
function excludeList(a,b){
var result=[];
for(var id in a){
var value=a[id];
if(!b.includes(value)){
result.push(value);
}
}
return result;
}
/**
* Currently can check only simple objects, not nesteded
* @param {*} obj1 
* @param {*} obj2 
*/
var isObjectsEqual=function isObjectsEqual(obj1,obj2){
var flag=false;
if((typeof obj1==='undefined'?'undefined':_typeof(obj1))==(typeof obj2==='undefined'?'undefined':_typeof(obj2))&&(typeof obj1==='undefined'?'undefined':_typeof(obj1))=='object'&&!Array.isArray(obj1)&&!Array.isArray(obj2)){
var arrayProperty1=Object.getOwnPropertyNames(obj1);
var arrayProperty2=Object.getOwnPropertyNames(obj2);
if(arrayProperty1.length==arrayProperty2.length&&arrayProperty1.length==0){
flag=true;
}else
if(arrayProperty1.length!=arrayProperty2.length){
flag=false;
}else
{
for(var i=0;i<arrayProperty1.length;i++){
var propName=arrayProperty1[i];
// let type1 = typeof obj1[propName];
// let type2 = typeof obj2[propName];
if(obj1[propName]!==obj2[propName]){
flag=false;
}else
{
flag=true;
}
}
}
}else
{
flag=false;
}
return flag;
};

module.exports={
cloneObject:cloneObject,
mergeObjects:mergeObjects,
objectsDiffer:objectsDiffer,
cloneProps:cloneProps,
excludeList:excludeList,
isObjectsEqual:isObjectsEqual};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9vYmplY3RzLmpzeCJdLCJuYW1lcyI6WyJjb3B5VG8iLCJkYXRhIiwidGFyZ2V0Iiwia2V5IiwidHlwZSIsImNsb25lT2JqZWN0IiwiY29uc3RydWN0b3IiLCJBcnJheSIsIk9iamVjdCIsIm1lcmdlT2JqZWN0cyIsInNyY09iaiIsImRzdE9iaiIsInNyYyIsImRzdCIsInNyY1R5cGUiLCJkc3RUeXBlIiwia2V5cyIsInJlc3VsdCIsImxlbmd0aCIsImFzc2lnbiIsImhhc093blByb3BlcnR5IiwiY2xvbmVQcm9wcyIsInByb3BzIiwiaWdub3JlIiwiaWduIiwiaWQiLCJvYmplY3RzRGlmZmVyIiwicXVlIiwicG9wIiwiY291bnQiLCJtYXAiLCJwdXNoIiwiZXhjbHVkZUxpc3QiLCJhIiwiYiIsInZhbHVlIiwiaW5jbHVkZXMiLCJpc09iamVjdHNFcXVhbCIsIm9iajEiLCJvYmoyIiwiZmxhZyIsImlzQXJyYXkiLCJhcnJheVByb3BlcnR5MSIsImdldE93blByb3BlcnR5TmFtZXMiLCJhcnJheVByb3BlcnR5MiIsImkiLCJwcm9wTmFtZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBOzs7OztBQUtBLFFBQVNBLE9BQVQsQ0FBZ0JDLElBQWhCLENBQXNCQyxNQUF0QixDQUE4QjtBQUMxQixJQUFLLEdBQUlDLElBQVQsR0FBZ0JGLEtBQWhCLENBQXNCO0FBQ2xCLEdBQU1HLGNBQWVILEtBQUtFLEdBQUwsQ0FBZixDQUFOO0FBQ0EsR0FBSUMsTUFBUSxRQUFaLENBQXNCO0FBQ2xCRixPQUFPQyxHQUFQLEVBQWNFLFlBQVlKLEtBQUtFLEdBQUwsQ0FBWixDQUFkO0FBQ0gsQ0FGRCxJQUVPO0FBQ0hELE9BQU9DLEdBQVAsRUFBY0YsS0FBS0UsR0FBTCxDQUFkO0FBQ0g7QUFDSjtBQUNELE1BQU9ELE9BQVA7QUFDSDtBQUNEOzs7OztBQUtBLFFBQVNHLFlBQVQsQ0FBcUJKLElBQXJCLENBQTJCO0FBQ3ZCLEdBQUksTUFBUUEsS0FBUixFQUFpQixXQUFqQixFQUFnQ0EsTUFBUSxJQUE1QyxDQUFrRDtBQUM5QyxNQUFPLEtBQVA7QUFDSCxDQUZELElBRU8sSUFBSSxPQUFPQSxLQUFQLG1DQUFPQSxJQUFQLElBQWUsUUFBbkIsQ0FBNkI7QUFDaEMsTUFBT0EsS0FBUDtBQUNIO0FBQ0QsR0FBSUEsS0FBS0ssV0FBTCxFQUFvQkMsS0FBeEIsQ0FBK0I7QUFDM0IsR0FBTUwsUUFBUyxFQUFmO0FBQ0EsTUFBT0YsUUFBT0MsSUFBUCxDQUFhQyxNQUFiLENBQVA7QUFDSCxDQUhELElBR08sSUFBSUQsS0FBS0ssV0FBTCxFQUFvQkUsTUFBeEIsQ0FBZ0M7QUFDbkMsR0FBTU4sU0FBUyxFQUFmO0FBQ0EsTUFBT0YsUUFBT0MsSUFBUCxDQUFhQyxPQUFiLENBQVA7QUFDSCxDQUhNLElBR0E7QUFDSCxNQUFPRCxLQUFQO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTRCQSxRQUFTUSxhQUFULENBQXNCQyxNQUF0QixDQUE4QkMsTUFBOUIsQ0FBc0M7O0FBRWxDLEdBQUlDLEtBQU1GLE1BQVY7QUFDQSxHQUFJRyxLQUFNRixNQUFWO0FBQ0EsR0FBSUcsZUFBaUJGLElBQWpCLG1DQUFpQkEsR0FBakIsQ0FBSjtBQUNBLEdBQUlHLGVBQWlCRixJQUFqQixtQ0FBaUJBLEdBQWpCLENBQUo7O0FBRUEsR0FBSUQsS0FBTyxJQUFYLENBQWlCO0FBQ2IsTUFBT0MsTUFBTyxJQUFQLENBQWMsSUFBZCxDQUFxQlIsWUFBWVEsR0FBWixDQUE1QjtBQUNILENBRkQsSUFFTyxJQUFJQSxLQUFPLElBQVgsQ0FBaUI7QUFDcEIsTUFBT1IsYUFBWU8sR0FBWixDQUFQO0FBQ0gsQ0FGTSxJQUVBLElBQUlFLFNBQVdDLE9BQVgsRUFBc0JELFNBQVcsUUFBckMsQ0FBK0M7QUFDbEQsR0FBSUYsSUFBSU4sV0FBSixFQUFtQk8sSUFBSVAsV0FBM0IsQ0FBd0M7QUFDcEMsTUFBT0QsYUFBWU8sR0FBWixDQUFQO0FBQ0gsQ0FGRCxJQUVPO0FBQ0gsR0FBSUksWUFBSjtBQUNBLEdBQU1DLFFBQVNaLFlBQVlPLEdBQVosQ0FBZjtBQUNBLEdBQUlBLElBQUlOLFdBQUosRUFBbUJDLEtBQXZCLENBQThCO0FBQzFCUyxLQUFPSixJQUFJTSxNQUFKLENBQWFMLElBQUlLLE1BQWpCLENBQTBCTixHQUExQixDQUFnQ0MsR0FBdkM7QUFDSCxDQUZELElBRU87QUFDSEcsS0FBTyxFQUFQO0FBQ0FSLE9BQU9XLE1BQVAsQ0FBY0gsSUFBZCxDQUFvQkosR0FBcEIsQ0FBeUJDLEdBQXpCO0FBQ0g7QUFDRCxJQUFLLEdBQUlWLElBQVQsR0FBZ0JhLEtBQWhCLENBQXNCO0FBQ2xCLEdBQU1GLGtCQUFrQkYsSUFBSVQsR0FBSixDQUFsQixDQUFOO0FBQ0EsR0FBTVksa0JBQWtCRixJQUFJVixHQUFKLENBQWxCLENBQU47QUFDQSxHQUFJUyxJQUFJUSxjQUFKLENBQW1CakIsR0FBbkIsR0FBMkJVLElBQUlPLGNBQUosQ0FBbUJqQixHQUFuQixDQUEvQixDQUF3RDtBQUNwRCxHQUFJVyxVQUFXQyxRQUFYLEVBQXNCRCxVQUFXLFFBQXJDLENBQStDO0FBQzNDLEdBQUlGLElBQUlULEdBQUosR0FBWSxJQUFoQixDQUFzQjtBQUNsQmMsT0FBT2QsR0FBUCxFQUFjRSxZQUFZUSxJQUFJVixHQUFKLENBQVosQ0FBZDtBQUNILENBRkQsSUFFTyxJQUFJVSxJQUFJVixHQUFKLEdBQVksSUFBaEIsQ0FBc0I7QUFDekJjLE9BQU9kLEdBQVAsRUFBY0UsWUFBWU8sSUFBSVQsR0FBSixDQUFaLENBQWQ7QUFDSCxDQUZNLElBRUE7QUFDSGMsT0FBT2QsR0FBUCxFQUFjTSxhQUFhRyxJQUFJVCxHQUFKLENBQWIsQ0FBdUJVLElBQUlWLEdBQUosQ0FBdkIsQ0FBZDtBQUNIO0FBQ0osQ0FSRCxJQVFPLElBQUlXLFVBQVcsUUFBWCxFQUF1QkYsSUFBSVQsR0FBSixHQUFZLElBQXZDLENBQTZDO0FBQ2hEYyxPQUFPZCxHQUFQLEVBQWNFLFlBQVlPLElBQUlULEdBQUosQ0FBWixDQUFkO0FBQ0gsQ0FGTSxJQUVBLElBQUlVLElBQUlWLEdBQUosR0FBWSxJQUFoQixDQUFzQjtBQUN6QmMsT0FBT2QsR0FBUCxFQUFjRSxZQUFZUSxJQUFJVixHQUFKLENBQVosQ0FBZDtBQUNILENBRk0sSUFFQTtBQUNIYyxPQUFPZCxHQUFQLEVBQWNFLFlBQVlPLElBQUlULEdBQUosQ0FBWixDQUFkO0FBQ0g7O0FBRUosQ0FqQkQsSUFpQk8sSUFBSSxDQUFDUyxJQUFJUSxjQUFKLENBQW1CakIsR0FBbkIsQ0FBTCxDQUE4QjtBQUNqQ2MsT0FBT2QsR0FBUCxFQUFjRSxZQUFZUSxJQUFJVixHQUFKLENBQVosQ0FBZDtBQUNILENBRk0sSUFFQTtBQUNIYyxPQUFPZCxHQUFQLEVBQWNFLFlBQVlPLElBQUlULEdBQUosQ0FBWixDQUFkO0FBQ0g7QUFDSjtBQUNELE1BQU9jLE9BQVA7QUFDSDtBQUNKLENBeENNLElBd0NBLElBQUlILFNBQVcsUUFBZixDQUF5QjtBQUM1QixNQUFPVCxhQUFZTyxHQUFaLENBQVA7QUFDSCxDQUZNLElBRUE7QUFDSCxNQUFPUCxhQUFZUSxHQUFaLENBQVA7QUFDSDtBQUNKOztBQUVEOzs7OztBQUtBLFFBQVNRLFdBQVQsQ0FBb0JDLEtBQXBCLENBQThDLElBQW5CQyxPQUFtQiwyREFBVixDQUFDLE1BQUQsQ0FBVTtBQUMxQyxHQUFNckIsUUFBUyxFQUFmOztBQUVBLEdBQU1zQixLQUFNLEVBQVo7QUFDQSxJQUFLLEdBQUlDLEdBQVQsR0FBZUYsT0FBZixDQUF1QjtBQUNuQkMsSUFBSUQsT0FBT0UsRUFBUCxDQUFKLEVBQWtCLElBQWxCO0FBQ0g7QUFDRCxJQUFLLEdBQUl0QixJQUFULEdBQWdCbUIsTUFBaEIsQ0FBdUI7QUFDbkIsR0FBSUUsSUFBSUosY0FBSixDQUFtQmpCLEdBQW5CLENBQUosQ0FBNkI7QUFDekI7QUFDSDs7QUFFREQsT0FBT0MsR0FBUCxFQUFjbUIsTUFBTW5CLEdBQU4sQ0FBZDtBQUNIO0FBQ0QsR0FBTWMsUUFBU1osWUFBWUgsTUFBWixDQUFmOztBQUVBLE1BQU9lLE9BQVA7QUFDSDs7O0FBR0Q7Ozs7Ozs7QUFPQSxRQUFTUyxjQUFULENBQXVCaEIsTUFBdkIsQ0FBK0JDLE1BQS9CLENBQXVDOztBQUVuQyxHQUFNZ0IsS0FBTSxDQUFDLENBQUNqQixNQUFELENBQVNDLE1BQVQsQ0FBRCxDQUFaO0FBQ0EsR0FBSUMsV0FBSixDQUFTQyxVQUFULENBSG1DOztBQUtsQmMsSUFBSUMsR0FBSixFQUxrQiwwQ0FLOUJoQixHQUw4QixjQUt6QkMsR0FMeUI7QUFNL0IsR0FBSUMsZUFBa0JGLElBQWxCLG1DQUFrQkEsR0FBbEIsQ0FBSjtBQUNBLEdBQUlHLGVBQWtCRixJQUFsQixtQ0FBa0JBLEdBQWxCLENBQUo7O0FBRUEsR0FBSUMsU0FBV0MsT0FBZixDQUF3QjtBQUNwQixTQUFPLElBQVA7QUFDSCxDQUZELElBRU8sSUFBSUQsU0FBVyxRQUFmLENBQXlCO0FBQzVCLEdBQUlGLEtBQU9DLEdBQVgsQ0FBZ0I7QUFDWixTQUFPLElBQVA7QUFDSDtBQUNKLENBSk0sSUFJQSxJQUFJRCxLQUFPLElBQVAsRUFBZUMsS0FBTyxJQUExQixDQUFnQztBQUNuQyxHQUFJYyxJQUFJVCxNQUFKLENBQWEsQ0FBakIsQ0FBb0I7QUFDaEIsU0FBTyxLQUFQO0FBQ0g7QUFDSixDQUpNLElBSUEsSUFBSU4sS0FBTyxJQUFQLEVBQWVDLEtBQU8sSUFBMUIsQ0FBZ0M7QUFDbkMsU0FBTyxJQUFQO0FBQ0gsQ0FGTSxJQUVBLElBQUlELEtBQU8sSUFBUCxFQUFlQyxLQUFPLElBQTFCLENBQWdDO0FBQ25DLFNBQU8sSUFBUDtBQUNILENBRk0sSUFFQSxJQUFJRCxJQUFJTixXQUFKLEVBQW1CTyxJQUFJUCxXQUEzQixDQUF3QztBQUMzQyxTQUFPLElBQVA7QUFDSDs7QUFFRCxHQUFJVSxZQUFKO0FBQ0EsR0FBSWEsT0FBUSxDQUFaO0FBQ0EsR0FBSWpCLElBQUlOLFdBQUosRUFBbUJDLEtBQXZCLENBQThCO0FBQzFCLEdBQUlLLElBQUlNLE1BQUosRUFBY0wsSUFBSUssTUFBdEIsQ0FBOEI7QUFDMUIsU0FBTyxJQUFQO0FBQ0gsQ0FGRCxJQUVPO0FBQ0hGLEtBQU9KLElBQUlNLE1BQVg7QUFDSDtBQUNKLENBTkQsSUFNTztBQUNIRixLQUFPLEVBQVA7QUFDQVIsT0FBT1EsSUFBUCxDQUFZSixHQUFaLEVBQWlCa0IsR0FBakIsQ0FBcUIsU0FBVTNCLEdBQVYsQ0FBZSxDQUFFYSxLQUFLYixHQUFMLEVBQVksSUFBTSxDQUF4RDtBQUNBSyxPQUFPUSxJQUFQLENBQVlILEdBQVosRUFBaUJpQixHQUFqQixDQUFxQixTQUFVM0IsR0FBVixDQUFlLENBQUVhLEtBQUtiLEdBQUwsRUFBWSxJQUFNLENBQXhEO0FBQ0g7O0FBRUQsSUFBSyxHQUFJQSxJQUFULEdBQWdCYSxLQUFoQixDQUFzQjtBQUNsQixHQUFJSixJQUFJUSxjQUFKLENBQW1CakIsR0FBbkIsR0FBMkJVLElBQUlPLGNBQUosQ0FBbUJqQixHQUFuQixDQUEvQixDQUF3RDtBQUNwRHdCLElBQUlJLElBQUosQ0FBUyxDQUFDbkIsSUFBSVQsR0FBSixDQUFELENBQVdVLElBQUlWLEdBQUosQ0FBWCxDQUFUO0FBQ0gsQ0FGRCxJQUVPLElBQUksQ0FBQ1MsSUFBSVEsY0FBSixDQUFtQmpCLEdBQW5CLENBQUQsRUFBNEJVLElBQUlPLGNBQUosQ0FBbUJqQixHQUFuQixDQUFoQyxDQUF5RDtBQUM1RCxTQUFPLElBQVA7QUFDSCxDQUZNLElBRUEsSUFBSVMsSUFBSVEsY0FBSixDQUFtQmpCLEdBQW5CLEdBQTJCLENBQUNVLElBQUlPLGNBQUosQ0FBbUJqQixHQUFuQixDQUFoQyxDQUF5RDtBQUM1RCxTQUFPLElBQVA7QUFDSDtBQUNKLENBakQ4QixFQUluQyxNQUFPd0IsSUFBSVQsTUFBSixDQUFhLENBQXBCLENBQXVCO0FBOEN0QjtBQUNELE1BQU8sTUFBUDtBQUNIOztBQUVEOzs7Ozs7O0FBT0EsUUFBU2MsWUFBVCxDQUFxQkMsQ0FBckIsQ0FBd0JDLENBQXhCLENBQTJCO0FBQ3ZCLEdBQU1qQixRQUFTLEVBQWY7QUFDQSxJQUFLLEdBQUlRLEdBQVQsR0FBZVEsRUFBZixDQUFrQjtBQUNkLEdBQU1FLE9BQVFGLEVBQUVSLEVBQUYsQ0FBZDtBQUNBLEdBQUksQ0FBQ1MsRUFBRUUsUUFBRixDQUFXRCxLQUFYLENBQUwsQ0FBd0I7QUFDcEJsQixPQUFPYyxJQUFQLENBQVlJLEtBQVo7QUFDSDtBQUNKO0FBQ0QsTUFBT2xCLE9BQVA7QUFDSDtBQUNEOzs7OztBQUtBLEdBQU1vQixnQkFBaUIsUUFBakJBLGVBQWlCLENBQUNDLElBQUQsQ0FBT0MsSUFBUCxDQUFnQjtBQUNuQyxHQUFJQyxNQUFPLEtBQVg7QUFDQSxHQUFJLE9BQU9GLEtBQVAsbUNBQU9BLElBQVAsV0FBc0JDLEtBQXRCLG1DQUFzQkEsSUFBdEIsSUFBOEIsT0FBT0QsS0FBUCxtQ0FBT0EsSUFBUCxJQUFlLFFBQTdDLEVBQXlELENBQUMvQixNQUFNa0MsT0FBTixDQUFjSCxJQUFkLENBQTFELEVBQWlGLENBQUMvQixNQUFNa0MsT0FBTixDQUFjRixJQUFkLENBQXRGLENBQTJHO0FBQ3ZHLEdBQU1HLGdCQUFpQmxDLE9BQU9tQyxtQkFBUCxDQUEyQkwsSUFBM0IsQ0FBdkI7QUFDQSxHQUFNTSxnQkFBaUJwQyxPQUFPbUMsbUJBQVAsQ0FBMkJKLElBQTNCLENBQXZCO0FBQ0EsR0FBSUcsZUFBZXhCLE1BQWYsRUFBeUIwQixlQUFlMUIsTUFBeEMsRUFBa0R3QixlQUFleEIsTUFBZixFQUF5QixDQUEvRSxDQUFrRjtBQUM5RXNCLEtBQU8sSUFBUDtBQUNILENBRkQ7QUFHSyxHQUFJRSxlQUFleEIsTUFBZixFQUF5QjBCLGVBQWUxQixNQUE1QyxDQUFvRDtBQUNyRHNCLEtBQU8sS0FBUDtBQUNILENBRkk7QUFHQTtBQUNELElBQUssR0FBSUssR0FBSSxDQUFiLENBQWdCQSxFQUFJSCxlQUFleEIsTUFBbkMsQ0FBMkMyQixHQUEzQyxDQUFnRDtBQUM1QyxHQUFJQyxVQUFXSixlQUFlRyxDQUFmLENBQWY7QUFDQTtBQUNBO0FBQ0EsR0FBSVAsS0FBS1EsUUFBTCxJQUFtQlAsS0FBS08sUUFBTCxDQUF2QixDQUF1QztBQUNuQ04sS0FBTyxLQUFQO0FBQ0gsQ0FGRDtBQUdLO0FBQ0RBLEtBQU8sSUFBUDtBQUNIO0FBQ0o7QUFDSjtBQUNKLENBdEJEO0FBdUJLO0FBQ0RBLEtBQU8sS0FBUDtBQUNIO0FBQ0QsTUFBT0EsS0FBUDtBQUNILENBN0JEOztBQStCQU8sT0FBT0MsT0FBUCxDQUFpQjtBQUNiM0MsdUJBRGE7QUFFYkkseUJBRmE7QUFHYmlCLDJCQUhhO0FBSWJMLHFCQUphO0FBS2JXLHVCQUxhO0FBTWJLLDZCQU5hLENBQWpCIiwiZmlsZSI6Im9iamVjdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcblxyXG4vKipcclxuICogU2ltaWxhciB0byBPYmplY3QuYXNzaWduLCBidXQgd29ya3Mgd2l0aCBhcnJheXMgdG9vXHJcbiAqIEBwYXJhbSB7YW55fSBkYXRhXHJcbiAqIEBwYXJhbSB7YW55fSB0YXJnZXRcclxuICovXHJcbmZ1bmN0aW9uIGNvcHlUbyhkYXRhLCB0YXJnZXQpIHtcclxuICAgIGZvciAobGV0IGtleSBpbiBkYXRhKSB7XHJcbiAgICAgICAgY29uc3QgdHlwZSA9IHR5cGVvZiAoZGF0YVtrZXldKTtcclxuICAgICAgICBpZiAodHlwZSA9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICB0YXJnZXRba2V5XSA9IGNsb25lT2JqZWN0KGRhdGFba2V5XSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBkYXRhW2tleV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRhcmdldDtcclxufVxyXG4vKipcclxuICogQ3JlYXRlcyBhIGZ1bGwgcmVjdXJzaXZlIGNvcHkgb2YgYW4gb2JqZWN0LlxyXG4gKiBAcGFyYW0ge2FueX0gZGF0YVxyXG4gKiBOb3RlLCBvbmx5IHRoZSBmb2xsb3dpbmcgdHlwZXMgYXJlIGNvcGllZDogcHJpbWl0aXZlcywgT2JqZWN0IGFuZCBBcnJheVxyXG4gKi9cclxuZnVuY3Rpb24gY2xvbmVPYmplY3QoZGF0YSkge1xyXG4gICAgaWYgKHR5cGVvZiAoZGF0YSkgPT0gJ3VuZGVmaW5lZCcgfHwgZGF0YSA9PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkYXRhICE9ICdvYmplY3QnKSB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcbiAgICBpZiAoZGF0YS5jb25zdHJ1Y3RvciA9PSBBcnJheSkge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IFtdO1xyXG4gICAgICAgIHJldHVybiBjb3B5VG8oZGF0YSwgdGFyZ2V0KTtcclxuICAgIH0gZWxzZSBpZiAoZGF0YS5jb25zdHJ1Y3RvciA9PSBPYmplY3QpIHtcclxuICAgICAgICBjb25zdCB0YXJnZXQgPSB7fTtcclxuICAgICAgICByZXR1cm4gY29weVRvKGRhdGEsIHRhcmdldCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogQHBhcmFtIHthbnl9IHNyY09ialxyXG4gKiBAcGFyYW0ge2FueX0gZHN0T2JqXHJcbiAqIFxyXG4gKiBPbmx5IG1lcmdlcyBlbGVtZW50cyB0aGF0IGV4aXN0IGluIHRhcmdldCBhbmQgZGF0YSBpZiB0aGV5IGFyZSBvZiB0aGUgc2FtZSBvYmplY3QgdHlwZS5cclxuICogXHJcbiAqIEV4YW1wbGU6XHJcbiAqIFxyXG4gKiBHaXZlbjpcclxuICogICBzcmNPYmo9e1xyXG4gKiAgICAgYTogMSxcclxuICogICAgIGI6IDIsXHJcbiAqICAgICBjOiBbMCwgMSwgMyx7ZDogMCxmOiBbMCwxXSxnOiB7eDogMTF9IH1dXHJcbiAqICAgfTtcclxuICogICBkc3RPYmo9e1xyXG4gKiAgICAgICAgZTogWzAsMCwwXSxcclxuICogICAgICAgIGM6IFsxLDAsMix7ZjogWzFdLGc6IHt4OiAxMix5OiAxM319XVxyXG4gKiAgICB9O1xyXG4gKiBcclxuICogVGhlIHJlc3VsdGluZyBvYmplY3Qgd291bGQgYmU6XHJcbiAqIFxyXG4gKiAgIHRhcmdldD17XHJcbiAqICAgICAgYTogMSxcclxuICogICAgICBiOiAyLFxyXG4gKiAgICAgIGM6IFsxLCAwLCAyLHtkOiAwLGY6IFsxLDFdLGc6IHt4OiAxMiwgeTogMTN9fV0sXHJcbiAqICAgICAgZTogWzAsMCwwXVxyXG4gKiAgICB9O1xyXG4gKi9cclxuZnVuY3Rpb24gbWVyZ2VPYmplY3RzKHNyY09iaiwgZHN0T2JqKSB7XHJcblxyXG4gICAgbGV0IHNyYyA9IHNyY09iajtcclxuICAgIGxldCBkc3QgPSBkc3RPYmo7XHJcbiAgICBsZXQgc3JjVHlwZSA9IHR5cGVvZiBzcmM7XHJcbiAgICBsZXQgZHN0VHlwZSA9IHR5cGVvZiBkc3Q7XHJcblxyXG4gICAgaWYgKHNyYyA9PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIGRzdCA9PSBudWxsID8gbnVsbCA6IGNsb25lT2JqZWN0KGRzdCk7XHJcbiAgICB9IGVsc2UgaWYgKGRzdCA9PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIGNsb25lT2JqZWN0KHNyYyk7XHJcbiAgICB9IGVsc2UgaWYgKHNyY1R5cGUgPT0gZHN0VHlwZSAmJiBzcmNUeXBlID09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgaWYgKHNyYy5jb25zdHJ1Y3RvciAhPSBkc3QuY29uc3RydWN0b3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNsb25lT2JqZWN0KHNyYyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IGtleXM7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGNsb25lT2JqZWN0KHNyYyk7XHJcbiAgICAgICAgICAgIGlmIChzcmMuY29uc3RydWN0b3IgPT0gQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgIGtleXMgPSBzcmMubGVuZ3RoID4gZHN0Lmxlbmd0aCA/IHNyYyA6IGRzdDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGtleXMgPSB7fTtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oa2V5cywgc3JjLCBkc3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBrZXlzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcmNUeXBlID0gdHlwZW9mIChzcmNba2V5XSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkc3RUeXBlID0gdHlwZW9mIChkc3Rba2V5XSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3JjLmhhc093blByb3BlcnR5KGtleSkgJiYgZHN0Lmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3JjVHlwZSA9PSBkc3RUeXBlICYmIHNyY1R5cGUgPT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNyY1trZXldID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtrZXldID0gY2xvbmVPYmplY3QoZHN0W2tleV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRzdFtrZXldID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtrZXldID0gY2xvbmVPYmplY3Qoc3JjW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBtZXJnZU9iamVjdHMoc3JjW2tleV0sIGRzdFtrZXldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3JjVHlwZSA9PSAnb2JqZWN0JyAmJiBzcmNba2V5XSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtrZXldID0gY2xvbmVPYmplY3Qoc3JjW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZHN0W2tleV0gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IGNsb25lT2JqZWN0KGRzdFtrZXldKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IGNsb25lT2JqZWN0KHNyY1trZXldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghc3JjLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IGNsb25lT2JqZWN0KGRzdFtrZXldKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBjbG9uZU9iamVjdChzcmNba2V5XSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHNyY1R5cGUgPT0gJ29iamVjdCcpIHtcclxuICAgICAgICByZXR1cm4gY2xvbmVPYmplY3Qoc3JjKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGNsb25lT2JqZWN0KGRzdCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDbG9uZXMgYSByZWFjdCBwcm9wcyBvYmplY3QuICBBbGwgZmllbGRzIGluIHRoZSBpZ25vcmUgbGlzdCBhcmUgaWdub3JlZFxyXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHNcclxuICogQHBhcmFtIHtBcnJheX0gaWdub3JlXHJcbiAqL1xyXG5mdW5jdGlvbiBjbG9uZVByb3BzKHByb3BzLCBpZ25vcmUgPSBbJ3Jvb3QnXSkge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0ge307XHJcblxyXG4gICAgY29uc3QgaWduID0ge307XHJcbiAgICBmb3IgKGxldCBpZCBpbiBpZ25vcmUpIHtcclxuICAgICAgICBpZ25baWdub3JlW2lkXV0gPSBudWxsXHJcbiAgICB9XHJcbiAgICBmb3IgKGxldCBrZXkgaW4gcHJvcHMpIHtcclxuICAgICAgICBpZiAoaWduLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0YXJnZXRba2V5XSA9IHByb3BzW2tleV07XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXN1bHQgPSBjbG9uZU9iamVjdCh0YXJnZXQpO1xyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogXHJcbiAqIEBwYXJhbSB7YW55fSBzcmNcclxuICogQHBhcmFtIHthbnl9IGRzdFxyXG4gKiBcclxuICogUmV0dXJucyB0cnVlIGlmIHRoZSAyIG9iamVjdHMgZGlmZmVyXHJcbiAqL1xyXG5mdW5jdGlvbiBvYmplY3RzRGlmZmVyKHNyY09iaiwgZHN0T2JqKSB7XHJcblxyXG4gICAgY29uc3QgcXVlID0gW1tzcmNPYmosIGRzdE9ial1dO1xyXG4gICAgbGV0IHNyYywgZHN0O1xyXG4gICAgd2hpbGUgKHF1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgW3NyYywgZHN0XSA9IHF1ZS5wb3AoKTtcclxuICAgICAgICBsZXQgc3JjVHlwZSA9IHR5cGVvZiAoc3JjKTtcclxuICAgICAgICBsZXQgZHN0VHlwZSA9IHR5cGVvZiAoZHN0KTtcclxuXHJcbiAgICAgICAgaWYgKHNyY1R5cGUgIT0gZHN0VHlwZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9IGVsc2UgaWYgKHNyY1R5cGUgIT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgaWYgKHNyYyAhPSBkc3QpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChzcmMgPT0gbnVsbCAmJiBkc3QgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAocXVlLmxlbmd0aCA8IDEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoc3JjID09IG51bGwgJiYgZHN0ICE9IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzcmMgIT0gbnVsbCAmJiBkc3QgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9IGVsc2UgaWYgKHNyYy5jb25zdHJ1Y3RvciAhPSBkc3QuY29uc3RydWN0b3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQga2V5cztcclxuICAgICAgICBsZXQgY291bnQgPSAwO1xyXG4gICAgICAgIGlmIChzcmMuY29uc3RydWN0b3IgPT0gQXJyYXkpIHtcclxuICAgICAgICAgICAgaWYgKHNyYy5sZW5ndGggIT0gZHN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBrZXlzID0gc3JjLmxlbmd0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGtleXMgPSB7fTtcclxuICAgICAgICAgICAgT2JqZWN0LmtleXMoc3JjKS5tYXAoZnVuY3Rpb24gKGtleSkgeyBrZXlzW2tleV0gPSBudWxsIH0pO1xyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhkc3QpLm1hcChmdW5jdGlvbiAoa2V5KSB7IGtleXNba2V5XSA9IG51bGwgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGxldCBrZXkgaW4ga2V5cykge1xyXG4gICAgICAgICAgICBpZiAoc3JjLmhhc093blByb3BlcnR5KGtleSkgJiYgZHN0Lmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgIHF1ZS5wdXNoKFtzcmNba2V5XSwgZHN0W2tleV1dKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghc3JjLmhhc093blByb3BlcnR5KGtleSkgJiYgZHN0Lmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNyYy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmICFkc3QuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBcclxuICogQHBhcmFtIHthbnl9IGFcclxuICogQHBhcmFtIHthbnl9IGJcclxuICogXHJcbiAqIHJldHVybnMgYSBuZXcgbGlzdCB0aGF0IGV4Y2x1ZGVzIGIgZnJvbSBhXHJcbiAqL1xyXG5mdW5jdGlvbiBleGNsdWRlTGlzdChhLCBiKSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcclxuICAgIGZvciAobGV0IGlkIGluIGEpIHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IGFbaWRdO1xyXG4gICAgICAgIGlmICghYi5pbmNsdWRlcyh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuLyoqXHJcbiogQ3VycmVudGx5IGNhbiBjaGVjayBvbmx5IHNpbXBsZSBvYmplY3RzLCBub3QgbmVzdGVkZWRcclxuKiBAcGFyYW0geyp9IG9iajEgXHJcbiogQHBhcmFtIHsqfSBvYmoyIFxyXG4qL1xyXG5jb25zdCBpc09iamVjdHNFcXVhbCA9IChvYmoxLCBvYmoyKSA9PiB7XHJcbiAgICBsZXQgZmxhZyA9IGZhbHNlO1xyXG4gICAgaWYgKHR5cGVvZiBvYmoxID09IHR5cGVvZiBvYmoyICYmIHR5cGVvZiBvYmoxID09IFwib2JqZWN0XCIgJiYgIUFycmF5LmlzQXJyYXkob2JqMSkgJiYgIUFycmF5LmlzQXJyYXkob2JqMikpIHtcclxuICAgICAgICBjb25zdCBhcnJheVByb3BlcnR5MSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iajEpO1xyXG4gICAgICAgIGNvbnN0IGFycmF5UHJvcGVydHkyID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob2JqMik7XHJcbiAgICAgICAgaWYgKGFycmF5UHJvcGVydHkxLmxlbmd0aCA9PSBhcnJheVByb3BlcnR5Mi5sZW5ndGggJiYgYXJyYXlQcm9wZXJ0eTEubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGFycmF5UHJvcGVydHkxLmxlbmd0aCAhPSBhcnJheVByb3BlcnR5Mi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZmxhZyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheVByb3BlcnR5MS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHByb3BOYW1lID0gYXJyYXlQcm9wZXJ0eTFbaV07XHJcbiAgICAgICAgICAgICAgICAvLyBsZXQgdHlwZTEgPSB0eXBlb2Ygb2JqMVtwcm9wTmFtZV07XHJcbiAgICAgICAgICAgICAgICAvLyBsZXQgdHlwZTIgPSB0eXBlb2Ygb2JqMltwcm9wTmFtZV07XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqMVtwcm9wTmFtZV0gIT09IG9iajJbcHJvcE5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBmbGFnID0gZmFsc2VcclxuICAgIH1cclxuICAgIHJldHVybiBmbGFnO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIGNsb25lT2JqZWN0LFxyXG4gICAgbWVyZ2VPYmplY3RzLFxyXG4gICAgb2JqZWN0c0RpZmZlcixcclxuICAgIGNsb25lUHJvcHMsXHJcbiAgICBleGNsdWRlTGlzdCxcclxuICAgIGlzT2JqZWN0c0VxdWFsLFxyXG59OyJdfQ==